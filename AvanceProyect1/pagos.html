{% extends "base.html" %}

{% block title %}Registrar Pago{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/pagos.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm p-4 rounded-3">
        <h2 class="mb-4 text-center fw-bold">Registrar Pago</h2>

        <form method="POST" novalidate>
            <!-- Monto -->
            <div class="mb-3">
                <label for="monto" class="form-label">Monto (S/.)</label>
                <input
                    type="number"
                    step="0.01"
                    min="0.01"
                    name="monto"
                    id="monto"
                    class="form-control {% if errores and errores.monto %}is-invalid{% endif %}"
                    value="{{ request.form.monto or '' }}"
                    required
                >
                {% if errores and errores.monto %}
                    <div class="invalid-feedback">{{ errores.monto }}</div>
                {% endif %}
            </div>

            <!-- Método de Pago -->
            <div class="mb-3">
                <label for="metodo" class="form-label">Método de Pago</label>
                <select
                    name="metodo"
                    id="metodo"
                    class="form-select {% if errores and errores.metodo %}is-invalid{% endif %}"
                    required
                >
                    <option value="">Seleccione un método...</option>
                    <option value="Efectivo" {% if request.form.metodo == 'Efectivo' %}selected{% endif %}>Efectivo</option>
                    <option value="Tarjeta" {% if request.form.metodo == 'Tarjeta' %}selected{% endif %}>Tarjeta</option>
                    <option value="Yape/Plin" {% if request.form.metodo == 'Yape/Plin' %}selected{% endif %}>Yape / Plin</option>
                </select>
                {% if errores and errores.metodo %}
                    <div class="invalid-feedback">{{ errores.metodo }}</div>
                {% endif %}
            </div>

            <!-- Fecha -->
            <div class="mb-3">
                <label for="fecha" class="form-label">Fecha del pago</label>
                <input
                    type="date"
                    name="fecha"
                    id="fecha"
                    class="form-control {% if errores and errores.fecha %}is-invalid{% endif %}"
                    value="{{ request.form.fecha or hoy.strftime('%Y-%m-%d') }}"
                    required
                >
                {% if errores and errores.fecha %}
                    <div class="invalid-feedback">{{ errores.fecha }}</div>
                {% endif %}
            </div>

            <!-- Botón de envío -->
            <div class="d-grid">
                <button type="submit" class="btn btn-success btn-lg">Registrar Pago</button>
            </div>
        </form>

        <!-- Mensaje de éxito -->
        {% if mensaje %}
            <div class="alert alert-success mt-4 text-center rounded-2">{{ mensaje }}</div>
        {% endif %}
    </div>
</div>
{% endblock %}
